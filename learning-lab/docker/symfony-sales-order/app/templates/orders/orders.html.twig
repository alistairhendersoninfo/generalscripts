{% extends 'base.html.twig' %}
{% block title %}Orders{% endblock %}
{% block body %}
<div class="flex items-center justify-between mb-6">
  <h1 class="text-2xl font-semibold">Sales orders</h1>
  <a href="{{ path('symfony_order_new') }}" class="bg-slate-900 text-white px-4 py-2 rounded">New order</a>
</div>
<div class="bg-white rounded shadow overflow-x-auto">
  <table class="min-w-full divide-y divide-slate-200">
    <thead class="bg-slate-50">
      <tr>
        <th class="px-4 py-2 text-left text-xs font-semibold uppercase tracking-wider">Order</th>
        <th class="px-4 py-2 text-left text-xs font-semibold uppercase tracking-wider">Customer</th>
        <th class="px-4 py-2 text-left text-xs font-semibold uppercase tracking-wider">Status</th>
        <th class="px-4 py-2 text-left text-xs font-semibold uppercase tracking-wider">Date</th>
        <th class="px-4 py-2 text-left text-xs font-semibold uppercase tracking-wider">Total</th>
        <th class="px-4 py-2"></th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-slate-200">
      {% for order in orders %}
      <tr class="hover:bg-slate-50">
        <td class="px-4 py-2">#{{ order.id }}</td>
        <td class="px-4 py-2">{{ order.customer.name }}</td>
        <td class="px-4 py-2 capitalize">{{ order.status }}</td>
        <td class="px-4 py-2">{{ order.orderDate|date('Y-m-d') }}</td>
        <td class="px-4 py-2 font-medium">${{ order.total|number_format(2) }}</td>
        <td class="px-4 py-2 text-right">
          <a href="{{ path('symfony_order_edit', {'id': order.id}) }}" class="text-slate-600 hover:text-slate-900">Edit</a>
        </td>
      </tr>
      <tr class="bg-slate-50/60">
        <td class="px-6 pb-4 text-sm text-slate-600" colspan="6">
          <div class="font-semibold mb-2">Line items</div>
          <ul class="space-y-1">
            {% for line in order.lines %}
            <li class="flex justify-between">
              <span>{{ line.sku.code }} â€” {{ line.sku.description }} (x{{ line.quantity }})</span>
              <span>${{ (line.unitPrice * line.quantity)|number_format(2) }}</span>
            </li>
            {% else %}
            <li>No line items captured.</li>
            {% endfor %}
          </ul>
        </td>
      </tr>
      {% else %}
      <tr>
        <td class="px-4 py-6 text-center text-slate-500" colspan="6">No orders yet.</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
